<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <title></title>
  <style>
    body {
      height: 500vh;
      background-color: #FFFFFF;
      background-image: linear-gradient(135deg, #FFFFFF 0%, #6284FF 50%, #FF0000 100%);
      margin:0;
    }
    #progressbar {
      position: fixed;
      top: 0;
      left: 0;
      height: 100px;
      background: yellow;
    }
  </style>
</head>
<body>
  
  <div id="progressbar">

  </div>
  
  <script>

    // Utilities
    function map_range(value, low1, high1, low2, high2) {
        return low2 + ((high2 - low2) * (value - low1)) / (high1 - low1);
    }

    var body = document.querySelector("body");
    var progressbar = document.getElementById("progressbar");
    
    body.onscroll = function(){
        var top = window.pageYOffset;
        let w = Math.floor(map_range(top,0,body.clientHeight - window.innerHeight,0, window.innerWidth));
        progressbar.style.width = w + "px";

    }

  </script>
</body>
  
</html>